<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desva Clothing</title>

    <link rel="stylesheet" href="css/style.css">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="../bootstrap-4.5.3-dist/css/bootstrap.css">

    <!-- Boxicon -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

     <!-- Sweet Alert -->
     <link rel="stylesheet" href="./package/dist/sweetalert2.css">

</head>
<body>

    <!-- navbar -->

    <nav>   
        <div class="container-fluid">

            <div class="row">

                <div class="col-md-4">

                    <div class="menu">

                        <li><a href="/User/index.html">HOME</a></li>
                        <li><a href="/User/shop.html">SHOPS</a></li>
                        <li><a href="#">SERVICES</a></li>
                        <li><a href="#">CONTACT</a></li>
                    
                    </div>

                </div>

                <div class="col-md-4">

                    <div class="logo">
                        <h1><a href="">Desva Clothing</a></h1>
                    </div>

                </div>
                
                <div class="col-md-4">

                    <div class="nav-icon">
                        <li><a href="login.html">LOGIN</a></li>
                        <li><a href=""><i class='bx bx-search'></i></a></li>
                        <li><a href="cart.html"><i class='bx bx-shopping-bag'></i></a></li>
                    </div>

                </div>

            </div>

        </div>

    </nav>

    <section class="my-cart">

        <div class="cart">
    
            <div class="cart-item">
                <img src="/image/example.jpg" alt="Black Hoodie" class="cart-item-image">
                <div class="cart-item-details">
                    <h4 class="cart-item-title">Black Hoodie</h4>
                    <p class="cart-item-quantity">1x</p>
                    <p class="cart-item-size">Small</p>
                    <p class="cart-item-price">₱432</p>
                </div>
                <div class="cart-item-remove">
                    <input type="checkbox" class="select-checkbox">
                    <input type="submit" class="delete-btn" value="Delete">
                </div>
            </div>
    
        </div>
    
        <div class="checkout-container">
    
            <div class="checkout">
    
                <div class="checkout-left">
    
                    <input type="checkbox" class="selectAll-checkbox" id="select-all">
                    <label for="select-all" id="selected-item-label">Selected Item (0)</label>
    
                </div>
    
                <div class="checkout-right">
                    <h3>Total Amount (Item 0): ₱0.00</h3>
                    <a href="checkout.html" class="checkout-btn" style="text-decoration: none;" disabled>Check out</a>
                </div>
    
            </div>
    
        </div>
    
    </section>


</body>

<script>

// Get all checkboxes with class 'select-checkbox'
const checkboxes = document.querySelectorAll('.select-checkbox');
console.log('Checkboxes:', checkboxes);

// Get the select all checkbox
const selectAllCheckbox = document.querySelector('.selectAll-checkbox');
console.log('Select all checkbox:', selectAllCheckbox);

// Get the label for selected items
const selectedItemLabel = document.querySelector('#selected-item-label');
console.log('Selected item label:', selectedItemLabel);

// Get the checkout button
const checkoutButton = document.querySelector('.checkout-btn');
console.log('Checkout button:', checkoutButton);

// Get the total amount label
const totalAmountLabel = document.querySelector('h3'); // Assuming the total amount is in the first <h3> element
console.log('Total amount label:', totalAmountLabel);

// Initialize the count of selected items and total amount
let selectedCount = 0;
let totalAmount = 0;

// Function to update the selected item count and total amount
function updateSelectedCount() {
  console.log('Updating selected count and total amount');
  selectedCount = 0;
  totalAmount = 0; // Reset total amount

  checkboxes.forEach((checkbox) => {
    if (checkbox.checked) {
      selectedCount++;
      const priceElement = checkbox.closest('.cart-item').querySelector('.cart-item-price');
      const price = parseFloat(priceElement.textContent.replace('₱', '').replace(',', '')); // Get price and convert to float
      totalAmount += price; // Add to total amount
    }
  });

  console.log('Selected count:', selectedCount);
  selectedItemLabel.textContent = `Selected Item (${selectedCount})`;
  
  // Update total amount display
  totalAmountLabel.textContent = `Total Amount (Item ${selectedCount}): ₱${totalAmount.toFixed(2)}`;
  
  // Enable or disable the checkout button based on the selected count
  checkoutButton.disabled = selectedCount === 0; // Disable if no items are selected
}

// Add event listener to each checkbox
checkboxes.forEach((checkbox) => {
  console.log('Adding event listener to checkbox');
  checkbox.addEventListener('change', updateSelectedCount);
});

// Add event listener to the select all checkbox
selectAllCheckbox.addEventListener('change', () => {
  console.log('Select all checkbox changed');
  checkboxes.forEach((checkbox) => {
    checkbox.checked = selectAllCheckbox.checked; // Set checked state based on select all
  });
  updateSelectedCount(); // Update the count after checking/unchecking
});

// Initial call to set the state of the checkout button and total amount
updateSelectedCount();

// Add event listener to the checkout button
checkoutButton.addEventListener('click', (event) => {
  if (selectedCount === 0) {
    event.preventDefault(); // Prevent navigation if no items are selected
     // Optional: display an alert message
  }
});

</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/adapters/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/User/js/script.js"></script>

</html> 